sudo: required

language: node_js

node_js:
  - "8.12.0"

services:
  - docker

env:
  - IMAGE_TAG="$PRIVATE_DOCKER_REGISTRY/dsw-web:latest"

install:
  - npm install -g npx
  - npm install

script:
  - npm run build
  - docker --version
  - docker login -u "$PRIVATE_DOCKER_USER" -p "$PRIVATE_DOCKER_PASSWORD" $PRIVATE_DOCKER_REGISTRY
  - docker build -t $IMAGE_TAG .
  - docker push $IMAGE_TAG
